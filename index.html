<style>
  body {
    background: #55a9ad; 
  }
  body, button {
    color: #e1e1e1;
    text-align: center;
    font-size: 40px;
    font-family: arial;
  }
  #kanji, #desc {
    color: #212121
  }
  #kanji {
    font-size: 150px;
    padding-top: 100px;
    cursor: pointer;
  }
  #desc {
    opacity: 0;
    font-size: 100px;
  }
  #desc.show {
    opacity: 1;
  }
  .hidden {
    display: none;
  }
  #catContainer {
    width: 800px;
    margin: 0 auto;
  }
  .cat {
    display: block;
    margin: 20px 0 0;
    background: #0e484b;
    position: relative;
  }
  .cat .catTitle {
    padding: 20px;
  }
  .cat input[type="checkbox"] {
    position: absolute;
    width: 45px;
    height: 45px;
    right: 20px;
    top: 20px;
  }
  .modeBtn {
    margin: 20px 10px;
    width: calc(50% - 40px);
    padding: 20px 0;
    background: #034f17;
    color: white;
  }
  .wordList {
    background: #555555;
    text-align: left;
    padding: 20px;
    color: white;
  }
  .wordList > div {
    padding: 20px 0;
  }
  .wordList button {
    margin-right: 20px;
    background: transparent;
    border: 0;
  }
  .wordList span {
    color: #94e7eb;
    font-weight: bold;
    padding-right: 50px;
  }
  #next {
    font-size: 100px;
    width: 600px;
    padding: 20px 0;
    border: 0;
    margin-top: 50px;
    background: #034f17;
    color: white;
  }
  #voiceList, input[type="text"] {
    font-size: 30px;
    width: 100%;
  }
  #voiceList {
    margin-bottom: 20px;
  }
</style>
<div id="catContainer">
  <div id="catList"></div>
</div>
<div id="main" class="hidden">
  <div id="kanji"></div>
  <div id="desc"></div>
  <button onclick="generate()" class="modeBtn">Tiáº¿p theo</button>
</div>
<script>
  let words = {
    "Quá»‘c gia": `
      Ã, Italy - Italian
      Bra-zin, Brazil - Brazilian
      Nga, Russia - Russian
      Má»¹, the USA - American
      Äá»©c, Germany - German
      Ai Cáº­p, Egypt - Egyptian
      Ãšc, Australia - Australian
      Mexico, Mexico - Mexican
      Thá»• NhÄ© Ká»³, Turkey - Turkish
      Anh, the UK - British
      Trung Quá»‘c, China - Chinese
      TÃ¢y Ban Nha, Spain - Spanish
      Viá»‡t Nam, Vietnam - Vietnamese
    `,
    "Äá»“ váº­t": `
      giá», bag
      tá»« Ä‘iá»ƒn, dictionary
      tÃ¡o, apple
      bÃºt bi, pen
      bÃºt chÃ¬, pencil
      sÃ¡ch, book
      táº­p, notebook
      mÃ¡y nghe nháº¡c, iPod
      Ä‘iá»‡n thoáº¡i, mobile
      dÃ¹, umbrella
      em bÃ©, baby
      bÃ© trai, boy
      bÃ© gÃ¡i, girl
      ngÆ°á»i Ä‘Ã n Ã´ng, man
      ngÆ°á»i phá»¥ ná»¯, woman
      nháº­t kÃ½, diary
      gháº¿, chair
      bÃ n, table
      mÃ¡y tÃ­nh, computer
      mÃ¡y chá»¥p hÃ¬nh, camera
      Ä‘á»“ng há»“ Ä‘eo tay, watch
      bÃ¡nh káº¹p, sandwich
    `,
    "CÃ´ng viá»‡c": `
      quáº£n lÃ½, manager
      bÃ¡c sÄ©, doctor
      diá»…n viÃªn nam, actor
      diá»…n viÃªn ná»¯, actress
      nhÃ¢n viÃªn bÃ¡n hÃ ng, shop assistant
      giÃ¡o viÃªn, teacher
      bá»“i bÃ n nam, waiter
      bá»“i bÃ n ná»¯, waitress
      tÃ i xáº¿ taxi, taxi driver
      nháº¡c sÄ©, musician
      cáº£nh sÃ¡t, police officer
    `,
    "ThÃ´ng tin": `
      tÃªn, first name
      há», surname
      cÃ³ gia Ä‘Ã¬nh, married
      Ä‘á»™c thÃ¢n, single
      quá»‘c tá»‹ch, nationality
      Ä‘á»‹a chá»‰, address
      sá»‘ Ä‘iá»‡n thoáº¡i, mobile number
      Ä‘á»‹a chá»‰ email, email address
    `
  };
  const divKanji = document.getElementById("kanji");
  const divDesc = document.getElementById("desc");
  const cat = document.getElementById("catList");
  const tts = new SpeechSynthesisUtterance();
  tts.rate = 0.6;
  let e2v = false;
  let result = [];
  const speech = window.speechSynthesis;
  let voices = speech.getVoices();
  if (voices.length) tts.voice = voices.find(i => i.name == "Daniel")

  let show = false;
  let index = 0;

  function generate() {
    if (show) {
      divDesc.classList.add("show");
      speak();
    }
    else {
      if (index == result.length) {
        rnd();
        index = 0;
        alert("ÄÃ£ háº¿t danh sÃ¡ch tá»« vá»±ng, danh sÃ¡ch sáº½ trÃ¡o láº¡i tá»« Ä‘áº§u...")
      }
      if (e2v) {
        divKanji.innerHTML = result[index][1];
        divDesc.innerHTML = result[index][0];
      } else {
        divKanji.innerHTML = result[index][0];
        divDesc.innerHTML = result[index][1];
      }
      divDesc.classList.remove("show");
      index++;
    }
    show = !show;
  }

  function rnd() {  
    result = result.sort(() => Math.random() - 0.5);
  }
  function next(m) {
    result = [];
    document.querySelectorAll("input").forEach(i => {
      if (i.checked) result.push(...words[i.id]);
    });
    if (!result.length) return alert("Xin hÃ£y chá»n Ã­t nháº¥t má»™t chá»§ Ä‘á»");
    document.getElementById("catContainer").classList.add("hidden");
    document.getElementById("main").classList.remove("hidden");
    e2v = m;
    rnd();
    generate();
  }

  function showDiv(e) {
    e.nextSibling.classList.toggle("hidden");
  }

  function speak(text) {
    if (speech.speaking) speech.cancel();
    tts.text = (text || result[index - 1][1]).replace(" - ", ", ");
    speech.speak(tts);
  }

  for (word in words) {
    let wordList = "";
    words[word] = words[word].split('\n').slice(1, -1).map(i => {
      i = i.split(", ");
      wordList += `<div><button onclick="speak('${i[1]}')">ðŸ”Š</button><span>${i[0]}</span>${i[1]}</div>`
      return i;
    });
    cat.innerHTML += `<div class="cat"><input type="checkbox" id="${word}"><div class="catTitle" onclick="showDiv(this)">${word}</div><div class="wordList hidden">${wordList}</div></div>`;
  }
  cat.innerHTML += `<button class="modeBtn" onclick="next(false)">Viá»‡t â‡’ Anh</button><button class="modeBtn" onclick="next(true)">Anh â‡’ Viá»‡t</button>`
</script>
